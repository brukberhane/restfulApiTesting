<!DOCTYPE html>
<html>
    <head>
        <title>
            LAText!
        </title>
        <script src="/jquery" type="text/javascript"></script>
        <script> var d; </script>
        <style>

            body{
                overflow-y:visible;
            }
        .triangle-obtuse {
            position: relative;
            padding:10px;
            width:fit-content;
            margin:1em auto 1em;
            color:#fff;
            /*background:#c81e2b;*/
            /* css3 
            background:-webkit-gradient(linear, 0 0, 0 100%, from(#f04349), to(#c81e2b));
            background:-moz-linear-gradient(#f04349, #c81e2b);
            background:-o-linear-gradient(#f04349, #c81e2b);
            background:linear-gradient(#f04349, #c81e2b);*/
            -webkit-border-radius:10px;
            -moz-border-radius:10px;
            border-radius:2em;
          }
          
          /* Variant : for top positioned triangle
          ------------------------------------------ */
          
          .triangle-obtuse.top {
            background:-webkit-gradient(linear, 0 0, 0 50%, from(#c81e2b), to(#f04349));
            background:-moz-linear-gradient(#c81e2b, #f04349);
            background:-o-linear-gradient(#c81e2b, #f04349);
            background:linear-gradient(#c81e2b, #f04349);
          }
          
          /* Variant : for left positioned triangle
          ------------------------------------------ */
          
          .triangle-obtuse.left {
            width: fit-content;
            height: auto;
            text-align: left;
            color: yellow;
            background: black;
            margin-left:5px;
            
            
          }
          
          /* Variant : for right positioned triangle
          ------------------------------------------ */
          
          .triangle-obtuse.right {
            margin-right:5px;
            text-align: left;
            /*background:#c81e2b;*/
            background: yellow;
            color: black
          }

          .content-wrapper{
              overflow-y: auto;
              height: 80%;
          }

          /* Scrollbar Styling */
            ::-webkit-scrollbar {
                width: 10px;
            }
 
            ::-webkit-scrollbar-track {
                background-color: yellow;
                -webkit-border-radius: 10px;
                border-radius: 10px;
            }

            ::-webkit-scrollbar-thumb {
                -webkit-border-radius: 10px;
                border-radius: 10px;
                background: black; 
            }

            .textstuffs{
                background: #1A1A1A;
                border-radius: 2em;
                border: none;
                margin: 1em;
                padding: 0.8em;
    
                color: #A2A2A2;
                font-size: 1.1em;
                padding-left: 1.5em;
                outline: none;

                /*Defining the width of the display*/
                width:80%;

                /*This is for bottom alignment*/
                position: fixed;left:0;
                bottom:0;
                
            }

            .bottomstuff{
                position: fixed;
                bottom: 0;
            }
            .sendButton{
                right:0;
                margin: 1em;
                font-size: 1.1em;
                border-radius: 2em;
            }
        </style>

    </head>
    <body bgcolor='gray'>
        
        <h1 align='center' id="msgtitle"> Messages: </h1>

        <div style='background-color:blue'> </div>


        <div class="content-wrapper" id="wrap"></div>
        
            <input type="text" class="textstuffs" autofocus placeholder="Say something..." autocomplete="on">
            <button class="sendButton bottomstuff">+</button>
        
            <!--<textarea id="textarea" class="textstuffs" rows="1" autocomplete="on" autofocus="true" 
        placeholder="Say something..." aria-label="Text entry field for Allo on web with Loving Birther."></textarea>-->
        
        
        <script>
        var gvarData;
        $(function () {
            $('#msgtitle').hide().slideDown('slow');
            
            $.get('http://localhost:8000/messages', {}, function(data){
                console.log(data)
                for (var i=0; i < data.length; i++){
                    if (data[i].uid_fk == 1){
                        $('#wrap').append("<p class='triangle-obtuse left'>"+ data[i].message+"</p>");
                    } else{
                        $('#wrap').append("<p class='triangle-obtuse right' >"+data[i].message+"</p>");
                    }
                    if (i == data.length-1){
                        gvarData = data;
                        console.log(gvarData);
                    }
                }
                gvarData = data;
                //alert("data has been gotten!");
                var wrapper = $('#wrap');
                wrapper.scrollTop = wrapper.scrollHeight; 
           });
           /*for (var i=0; i < d.length; i++){
               $(document.body).append(d[i].message);
           }*/

           $('#msgtitle').click(function(){
               console.log(gvarData);
           });

           //$(document.body).append("Hello!!!");
            //$(document.body).append(window.d[0].message);
            
           setInterval(function(){
               //console.log(gvarData);
           }, 300);

           console.log(gvarData);

        });

        </script>

    </body>
</html>
